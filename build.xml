<?xml version="1.0" encoding="UTF-8" ?>
<project name="TotemMVC" default="init" basedir="./src/">
    <description>
        TotemMVC build script
    </description>
    
    <!-- These properties should be overriden by the commandline -->
    <property name="default" value="" />

    <target name="init">
        <!-- Build the folder structure -->
        <mkdir dir="${default}builds" />
        <mkdir dir="${default}builds/TotemMVC" />
        <mkdir dir="${default}builds/TotemMVC/application" />
        <mkdir dir="${default}builds/TotemMVC/application/development" />
        <copy todir="${default}builds/TotemMVC/application/development">
            <fileset dir="application-dist/" />
        </copy>
        <mkdir dir="${default}builds/TotemMVC/application/production" />
        <copy todir="${default}builds/TotemMVC/application/production">
            <fileset dir="application-dist/" />
        </copy>
        <mkdir dir="${default}builds/TotemMVC/lib/" />
        <mkdir dir="${default}builds/TotemMVC/lib/SPL/" />
        <copy file="lib/SPL/SplClassLoader.php" tofile="${default}builds/TotemMVC/lib/SPL/SplClassLoader.php" />
        <mkdir dir="${default}builds/TotemMVC/webroot/" />
        <copy file="webroot/.htaccess" tofile="${default}builds/TotemMVC/webroot/.htaccess" />
        <copy file="webroot/index.php" tofile="${default}builds/TotemMVC/webroot/index.php" />
    </target>
    
    <target name="makelibs">
        <ant antfile="src/lib/core_build.xml" />
        <ant antfile="src/lib/view_build.xml" />
        <ant antfile="src/lib/model_build.xml" />
    </target>
</project>